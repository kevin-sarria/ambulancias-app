CREATE DATABASE ambulancias_app

CREATE TABLE ambulancia(id INT(3) AUTO_INCREMENT, placa VARCHAR(10) NOT NULL, id_tipo_ambulancia INT(3) NOT NULL, imagen VARCHAR(300), PRIMARY KEY(id))

CREATE TABLE tipo_ambulancia(id INT(3) AUTO_INCREMENT NOT NULL, nombre VARCHAR(30) NOT NULL, PRIMARY KEY(id))

CREATE TABLE herramientas(id INT(3) AUTO_INCREMENT NOT NULL, nombre VARCHAR(30) NOT NULL, cantidad INT(3), color VARCHAR(30), id_ambulancia INT(3), PRIMARY KEY(id))

CREATE TABLE medicamentos(id INT(3) AUTO_INCREMENT NOT NULL, nombre VARCHAR(30) NOT NULL, lote VARCHAR(30), fecha_vencimiento DATE, cantidad INT(3), registro_invima VARCHAR(30), id_ambulancia INT(3), PRIMARY KEY(id))

CREATE TABLE dispositivos_medicos(id INT(3) AUTO_INCREMENT NOT NULL, nombre VARCHAR(60) NOT NULL, cantidad INT(4) NOT NULL, lote VARCHAR(30) NOT NULL, fecha_vencimiento DATE, registro_invima VARCHAR(30), id_ambulancia INT(3), PRIMARY KEY(id))

CREATE TABLE users(id INT(3) AUTO_INCREMENT NOT NULL, correo VARCHAR(60) NOT NULL, password VARCHAR(60) NOT NULL, user INT(1) NOT NULL, PRIMARY KEY(id))

INSERT INTO `medicamentos`(`nombre`, `lote`, `fecha_vencimiento`, `cantidad`, `registro_invima`) VALUES ('aceptaminofen', '2020/12/10', '2022/12/10','30','INVIMA 2022M-0020337');

INSERT INTO `medicamentos`(`nombre`, `lote`, `fecha_vencimiento`, `cantidad`, `registro_invima`) VALUES ('paracetamol', '2020/12/10', '2022/12/10','30','INVIMA 2022M-0020337');

ALTER TABLE ambulancia ADD FOREIGN KEY(id_tipo_ambulancia) REFERENCES tipo_ambulancia(id) ON UPDATE CASCADE ON DELETE CASCADE

INSERT INTO `tipo_ambulancia`(`nombre`) VALUES ('Medicalizada')

ALTER TABLE medicamentos ADD CONSTRAINT `fk_medicamento` FOREIGN KEY (id_ambulancia) REFERENCES ambulancia(id) ON UPDATE CASCADE ON DELETE CASCADE

ALTER TABLE dispositivos_medicos ADD CONSTRAINT `fk_dispo_medico` FOREIGN KEY (id_ambulancia) REFERENCES ambulancia(id) ON UPDATE CASCADE ON DELETE CASCADE

ALTER TABLE herramientas ADD CONSTRAINT `fk_herramienta` FOREIGN KEY (id_ambulancia) REFERENCES ambulancia(id) ON UPDATE CASCADE ON DELETE CASCADE

CREATE TABLE medicamentos_default( id INT(3) AUTO_INCREMENT NOT NULL, nombre VARCHAR(30) NOT NULL, PRIMARY KEY(id) );

CREATE TABLE herramientas_default( id INT(3) AUTO_INCREMENT NOT NULL, nombre VARCHAR(30) NOT NULL, PRIMARY KEY(id))

CREATE TABLE dispositivos_medicos_default( id INT(3) AUTO_INCREMENT NOT NULL, nombre VARCHAR(30) NOT NULL, PRIMARY KEY(id))

INSERT INTO `dispositivos_medicos_default`(`nombre`) VALUES ('Cuello Ortopedico')

INSERT INTO `dispositivos_medicos_default`(`nombre`) VALUES ('Bomba de Aire')

INSERT INTO `dispositivos_medicos_default`(`nombre`) VALUES ('Jeringa')

INSERT INTO `herramientas_default`(`nombre`) VALUES ('Destornillador de Estrella')

INSERT INTO `herramientas_default`(`nombre`) VALUES ('Gato Hidraulico')

INSERT INTO `herramientas_default`(`nombre`) VALUES ('Alicate de Punta')

CREATE TABLE links_aseo(id INT(3) AUTO_INCREMENT NOT NULL, link TEXT NOT NULL, id_ambulancia INT(3) NOT NULL, PRIMARY KEY(id))

ALTER TABLE links_aseo ADD CONSTRAINT `fk_links_aseo` FOREIGN KEY (id_ambulancia) REFERENCES ambulancia(id) ON UPDATE CASCADE ON DELETE CASCADE